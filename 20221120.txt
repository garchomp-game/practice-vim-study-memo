TIP72: -検索パタンが大文字/小文字を区別するかを予測する

ignorecase設定を有効にすると、vimの検索パターンで
大文字/小文字を区別しないようにできる。
:h ignorecase
この設定をすると、保管機能等に影響が出ることがあるため
注意が必要。

vimで使える正規表現の種類

magic検索 :h /magic
#\([0-9a-fA-F]\{6}\|[0-9a-fA-F]\{3}\)
\vパターンスイッチ
\v#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})
\vパターンスイッチ+\x文字クラスも仕様
:h /character-classes
\v#(\x{6}|\x{3})

一般的に、正規表現を検索したい場合は\vパターンスイッチ、
テキストを検索したい場合は\Vリテラルスイッチを使う。
以下ヘルプの早見表コピペ

例:
  \v	   \m	  | \M	    \V	 	マッチするもの ~
		'magic'    | 'nomagic'
--------------------------------------------
	  a	   a	   | a	     a	  	リテラルの 'a'
	  \a	  \a	  | \a     \a	 	何かの英字 1 文字
	  .	   .	   | \.	    \.	 	何か 1 文字
	  \.	  \.	  | .	     .	  	リテラルのドット
	  $	   $	   | $	     \$	 	行末
	  *	   *	   | \*	    \*	 	直前のアトムの繰り返し
	  ~	   ~	   | \~	    \~	 	直近の置換文字列
	  ()	  \(\) | \(\)   \(\)	アトムとしてグループ化
	  |	   \|	  | \|	    \|	 	マッチ無し: 選択の区切り
	  \\	  \\	  | \\	    \\		 リテラルのバックスラッシュ
	  \{	  {	   | {	     {		  リテラルの波カッコ

TIP75: カッコを使って部分マッチをキャプチャする
patterns/springtime.txt
連続して重複している単語を探すには
/\V<(\w+)\_s+\1>
theが連続して続いている部分を探す。

TIP76: 単語の境界を指定する。
境界を指定するために、単語境界デリミタというものがある。
これに関しては、単語境界デリミタとして<>を使うことができる。
これらを利用して
/\v<the><CR>
とすることで、theという単語を明確に検索することができる。

/\v(And|D)rew Neilと検索すると、(And|D)のどちらかが
\1にキャプチャされることになる。
このキャプチャをしないようにするには、カッコの頭に%をつければ良い。
つまり、
/\v%(And|D)rew Neil
とすればキャプチャせずに検索を実行することができる。
これをうまく利用して、
/\v(%(And|D)rew) (Neil)
とすると、Andrew/DrewとNeilの名前を入れ替えるといった事をする時、
\1にはAndrewかDrewが、\2にはNeilが入る。

\zsと\zeの使い分けについて
\zsはパターンの開始地点の設定
\zeは終了地点の設定。
例えば、これを検索で応用すると、/practical \zsvimで実行した場合、
practicalの直後にあるvimがハイライト表示されることになる。
内部としては、practical vimが検索されているが、practicalの部分は
検索結果表示時には除外される。

例えば以下の文があったとする
Match "quoted words"---not quote marks.
この分のダブルクォーテーションの中を検索する時、zeやzsを活用すると
便利な検索ができるようになることがある。

/\v"\zs[^"]+\ze"<CR>
これはこのように書き直すこともできる
/\v"@<=[^"]+"@=<CR>

TIP78: 文字をエスケープ
patterns/search-url.markdown
urlを検索するには、以下のように、必要なところは
適宜バックスラッシュでエスケープしてあげる必要がある。
\Vhttp:\/\/vimdoc.net\/search\?q=\/\\\\

escape({string}, {chars})で、エスケープ文字を指定することができる
これを使って、いちいちエスケープ処理しなくても
/\V<C-r>"=escape(@u, '/\)<CR>
でエスケープ処理をしてくれた上で検索してくれる。
@uの中身は書き換わらないので安心。

TIP80: マッチを強調表示する
:h hlsearch hls
:set hlsとすることで、ハイライトを有効にすることができる。
:nohで一時的に無効、:set nohls:set hlsとすることで、
ハイライトを有効にすることができる。
:set nohlsで無効化すること尾ができる

<C-l> 再描画
TIP81: 実行前に最初にマッチするものをプレビュー
検索フィールドプレビュー
:h incsearch
例えば、以下の文に対して/carrと入力してみる
The car was the color of a carrot
/car入力地点では、先頭のcarにヒットするが、その後続けて
rを入力したら、carrotの先頭にカーソルが移動する。
この時点で<ESC>を押したら最初にカーソルがあった場所に戻る。
これのメリットは、例えば検索対象のページがかなり下の方にあり
画面から離れていたとしても、<ESC>を押せば元の場所に戻ることができる。
つまり、いちいちマークしなくても調べるだけなら手軽にできる。

